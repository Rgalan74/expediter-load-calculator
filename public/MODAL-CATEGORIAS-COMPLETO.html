<!-- âœ… MODAL PARA GESTIONAR CATEGORÃAS -->
<div id="categoryModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">

        <!-- Modal Header -->
        <div class="border-b border-gray-200 px-6 py-4 flex items-center justify-between sticky top-0 bg-white">
            <h3 class="text-lg font-semibold text-gray-900">âš™ï¸ GestiÃ³n de CategorÃ­as de Gastos</h3>
            <button type="button" onclick="closeCategoryModal()" class="text-gray-400 hover:text-gray-600">
                <span class="text-2xl">&times;</span>
            </button>
        </div>

        <!-- Modal Body -->
        <div class="px-6 py-4">

            <!-- Formulario de Nueva CategorÃ­a -->
            <div class="bg-purple-50 border border-purple-200 rounded-lg p-4 mb-6">
                <h4 class="text-md font-semibold text-purple-900 mb-3">â• Crear Nueva CategorÃ­a</h4>

                <div class="space-y-4">

                    <!-- Nombre -->
                    <div>
                        <label for="categoryName" class="block text-sm font-medium text-gray-700 mb-1">Nombre de la
                            CategorÃ­a</label>
                        <input type="text" id="categoryName" placeholder="Ej: PrÃ©stamos, Marketing, etc."
                            class="border border-gray-300 rounded px-3 py-2 w-full focus:border-purple-500 focus:outline-none"
                            maxlength="30" required>
                    </div>

                    <!-- Icono (selector simple) -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Ãcono</label>
                        <div id="iconSelector" class="grid grid-cols-8 gap-2">
                            <!-- Ãconos comunes -->
                            <button type="button"
                                class="icon-option text-2xl p-2 border rounded hover:bg-purple-100 hover:border-purple-500 transition"
                                onclick="selectIcon('ğŸ’³')">ğŸ’³</button>
                            <button type="button"
                                class="icon-option text-2xl p-2 border rounded hover:bg-purple-100 hover:border-purple-500 transition"
                                onclick="selectIcon('ğŸ’°')">ğŸ’°</button>
                            <button type="button"
                                class="icon-option text-2xl p-2 border rounded hover:bg-purple-100 hover:border-purple-500 transition"
                                onclick="selectIcon('ğŸ’»')">ğŸ’»</button>
                            <button type="button"
                                class="icon-option text-2xl p-2 border rounded hover:bg-purple-100 hover:border-purple-500 transition"
                                onclick="selectIcon('ğŸ“±')">ğŸ“±</button>
                            <button type="button"
                                class="icon-option text-2xl p-2 border rounded hover:bg-purple-100 hover:border-purple-500 transition"
                                onclick="selectIcon('ğŸ¦')">ğŸ¦</button>
                            <button type="button"
                                class="icon-option text-2xl p-2 border rounded hover:bg-purple-100 hover:border-purple-500 transition"
                                onclick="selectIcon('ğŸ ')">ğŸ </button>
                            <button type="button"
                                class="icon-option text-2xl p-2 border rounded hover:bg-purple-100 hover:border-purple-500 transition"
                                onclick="selectIcon('ğŸ“')">ğŸ“</button>
                            <button type="button"
                                class="icon-option text-2xl p-2 border rounded hover:bg-purple-100 hover:border-purple-500 transition"
                                onclick="selectIcon('âš¡')">âš¡</button>
                            <button type="button"
                                class="icon-option text-2xl p-2 border rounded hover:bg-purple-100 hover:border-purple-500 transition"
                                onclick="selectIcon('ğŸ”§')">ğŸ”§</button>
                            <button type="button"
                                class="icon-option text-2xl p-2 border rounded hover:bg-purple-100 hover:border-purple-500 transition"
                                onclick="selectIcon('ğŸ› ï¸')">ğŸ› ï¸</button>
                            <button type="button"
                                class="icon-option text-2xl p-2 border rounded hover:bg-purple-100 hover:border-purple-500 transition"
                                onclick="selectIcon('ğŸ“¦')">ğŸ“¦</button>
                            <button type="button"
                                class="icon-option text-2xl p-2 border rounded hover:bg-purple-100 hover:border-purple-500 transition"
                                onclick="selectIcon('ğŸ¯')">ğŸ¯</button>
                            <button type="button"
                                class="icon-option text-2xl p-2 border rounded hover:bg-purple-100 hover:border-purple-500 transition"
                                onclick="selectIcon('ğŸ“Š')">ğŸ“Š</button>
                            <button type="button"
                                class="icon-option text-2xl p-2 border rounded hover:bg-purple-100 hover:border-purple-500 transition"
                                onclick="selectIcon('ğŸ’¡')">ğŸ’¡</button>
                            <button type="button"
                                class="icon-option text-2xl p-2 border rounded hover:bg-purple-100 hover:border-purple-500 transition"
                                onclick="selectIcon('ğŸš€')">ğŸš€</button>
                            <button type="button"
                                class="icon-option text-2xl p-2 border rounded hover:bg-purple-100 hover:border-purple-500 transition"
                                onclick="selectIcon('â­')">â­</button>
                        </div>
                        <input type="hidden" id="selectedIcon" value="ğŸ“Œ">
                    </div>

                    <!-- Color -->
                    <div>
                        <label for="categoryColor" class="block text-sm font-medium text-gray-700 mb-1">Color
                            (opcional)</label>
                        <input type="color" id="categoryColor" value="#6b7280"
                            class="border border-gray-300 rounded px-3 py-2 w-full h-10">
                    </div>

                    <!-- BotÃ³n Crear -->
                    <button type="button" onclick="saveCustomCategory()"
                        class="w-full bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">
                        ğŸ’¾ Crear CategorÃ­a
                    </button>

                </div>
            </div>

            <!-- Lista de CategorÃ­as Personalizadas -->
            <div>
                <h4 class="text-md font-semibold text-gray-900 mb-3">ğŸ“‹ Tus CategorÃ­as Personalizadas</h4>
                <div id="customCategoriesList" class="grid grid-cols-2 md:grid-cols-3 gap-3">
                    <!-- Se poblarÃ¡ dinÃ¡micamente -->
                </div>
            </div>

        </div>

        <!-- Modal Footer -->
        <div class="border-t border-gray-200 px-6 py-4 flex justify-end sticky bottom-0 bg-white">
            <button type="button" onclick="closeCategoryModal()"
                class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">
                Cerrar
            </button>
        </div>

    </div>
</div>