/* =================================================================
   MOBILE-FIRST RESPONSIVE STYLES - Expediter V2
   Optimización para dispositivos móviles y tablets
   ================================================================= */

/* ====================================
   1. MOBILE CARDS - Reemplazo de Tablas
   ==================================== */

.mobile-card {
  @apply bg-white rounded-lg shadow-md p-4 mb-3;
  border-left: 4px solid #3b82f6;
  transition: all 0.2s ease;
}

.mobile-card:active {
  @apply shadow-lg;
  transform: scale(0.98);
}

.mobile-card-header {
  @apply flex items-center justify-between mb-3 pb-3 border-b border-gray-200;
}

.mobile-card-title {
  @apply font-bold text-base text-gray-900 flex-1;
}

.mobile-card-badge {
  @apply px-3 py-1 rounded-full text-sm font-semibold;
}

.mobile-card-badge.success {
  @apply bg-green-100 text-green-800;
}

.mobile-card-badge.warning {
  @apply bg-yellow-100 text-yellow-800;
}

.mobile-card-badge.danger {
  @apply bg-red-100 text-red-800;
}

.mobile-card-info {
  @apply grid grid-cols-2 gap-3 text-sm mb-3;
}

.mobile-card-info-item {
  @apply flex flex-col;
}

.mobile-card-label {
  @apply text-gray-500 text-xs mb-1;
}

.mobile-card-value {
  @apply font-semibold text-gray-900;
}

.mobile-card-actions {
  @apply flex gap-2 mt-3 pt-3 border-t border-gray-100;
}

/* ====================================
   2. TOUCH TARGETS - iOS Guidelines
   ==================================== */

/* Mínimo 44x44px para touch targets */
button,
.btn,
a.btn,
input[type="submit"],
input[type="button"] {
  min-height: 44px;
  min-width: 44px;
  padding: 12px 24px;
}

/* Inputs con tamaño mínimo para evitar zoom en iOS */
input,
select,
textarea {
  font-size: 16px;
  /* Previene zoom automático en iOS */
  min-height: 44px;
  padding: 12px 16px;
}

/* MOBILE: Mejor visibilidad de inputs */
@media (max-width: 768px) {

  /* DARK STYLE - Matching "Información de Ruta" */
  input,
  select,
  textarea {
    background-color: #1f2937 !important;
    /* Fondo NEGRO oscuro (gray-800) */
    color: #ffffff !important;
    /* Texto BLANCO */
    border: 1.5px solid #4b5563 !important;
    /* Borde gris medio */
    -webkit-text-fill-color: #ffffff !important;
    /* Fix Safari */
  }

  input::placeholder,
  textarea::placeholder {
    color: #6b7280 !important;
    /* Placeholder gris sutil */
    opacity: 0.6 !important;
    /* Menos visible */
  }

  /* Efecto al hacer focus/click */
  input:focus,
  textarea:focus,
  select:focus {
    background-color: #374151 !important;
    /* Fondo ligeramente más claro al hacer focus */
    border-color: #60a5fa !important;
    /* Borde azul brillante */
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2) !important;
  }

  /* Labels blancos en la calculadora - ULTRA ESPECÍFICO */
  #calculator label,
  #calculator .text-gray-700,
  #calculator .text-gray-500,
  #calculator label.text-gray-700,
  #calculator label.block,
  #calculator div label,
  section#calculator label {
    color: #ffffff !important;
  }

  /* Textos descriptivos pequeños - ULTRA ESPECÍFICO */
  #calculator .text-xs,
  #calculator p.text-xs,
  #calculator .text-gray-500,
  section#calculator .text-xs {
    color: #d1d5db !important;
  }

  /* CRITICAL: Asegurar que el texto de los labels sea blanco en TODAS las card-sections */
  .card-section label,
  .card-section .text-gray-700,
  div.card-section label.block,
  #calculator .card-section label {
    color: #ffffff !important;
    -webkit-text-fill-color: #ffffff !important;
  }
}



/* Checkboxes y radios más grandes */
input[type="checkbox"],
input[type="radio"] {
  min-width: 20px;
  min-height: 20px;
  cursor: pointer;
}

/* ====================================
   3. TABLES - Responsive Wrapper
   ==================================== */

.table-wrapper {
  @apply overflow-x-auto -mx-4 px-4;
  -webkit-overflow-scrolling: touch;
  /* Smooth scroll en iOS */
}

.table-wrapper::-webkit-scrollbar {
  height: 8px;
}

.table-wrapper::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 4px;
}

/* Indicador de scroll horizontal */
.table-wrapper::after {
  content: '→ Desliza para ver más';
  @apply absolute right-0 top-0 bg-blue-500 text-white text-xs px-2 py-1 rounded-bl;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s;
}

@media (max-width: 768px) {
  .table-wrapper:not(.scrolled)::after {
    opacity: 1;
  }
}

/* ====================================
   4. MODALS - Full Screen en Móvil
   ==================================== */

@media (max-width: 640px) {
  .modal-content {
    @apply !fixed !inset-0 !m-0 !max-w-none !rounded-none;
    height: 100vh;
    max-height: 100vh;
  }

  .modal-header {
    @apply sticky top-0 z-10 bg-white border-b border-gray-200;
  }

  .modal-body {
    @apply overflow-y-auto;
    max-height: calc(100vh - 140px);
  }

  .modal-close-btn {
    @apply w-12 h-12 text-2xl;
  }
}

/* ====================================
   5. FORMS - Mobile Optimized
   ==================================== */

@media (max-width: 768px) {

  /* Stack inputs verticalmente */
  .form-grid {
    @apply !grid-cols-1 gap-4;
  }

  /* Botones full-width */
  .btn-group button,
  .form-actions button {
    @apply w-full;
  }

  /* Labels más prominentes */
  label {
    @apply font-semibold text-base mb-2;
  }
}

/* ====================================
   6. NAVIGATION - Mobile Menu
   ==================================== */

@media (max-width: 768px) {

  /* Tabs con scroll horizontal */
  .tab-list {
    @apply overflow-x-auto flex gap-2;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    /* Firefox */
  }

  .tab-list::-webkit-scrollbar {
    display: none;
    /* Chrome, Safari */
  }

  .tab-link {
    @apply flex-shrink-0;
  }
}

/* ====================================
   7. UTILITY CLASSES
   ==================================== */

/* Ocultar en móvil */
.hide-mobile {
  @apply hidden;
}

@media (min-width: 768px) {
  .hide-mobile {
    @apply block;
  }
}

/* Mostrar solo en móvil */
.show-mobile {
  @apply block;
}

@media (min-width: 768px) {
  .show-mobile {
    @apply hidden;
  }
}

/* Cards container */
.mobile-cards-container {
  @apply space-y-3;
}

/* ====================================
   8. SCROLL INDICATORS
   ==================================== */

.scroll-indicator {
  @apply relative;
}

.scroll-indicator::before {
  content: '';
  @apply absolute left-0 top-0 bottom-0 w-8 pointer-events-none;
  background: linear-gradient(to right, rgba(255, 255, 255, 1), transparent);
  opacity: 0;
  transition: opacity 0.3s;
}

.scroll-indicator::after {
  content: '';
  @apply absolute right-0 top-0 bottom-0 w-8 pointer-events-none;
  background: linear-gradient(to left, rgba(255, 255, 255, 1), transparent);
}

.scroll-indicator.scrolled-left::before {
  opacity: 1;
}

/* ====================================
   9. ANIMATIONS - Touch Feedback
   ==================================== */

.touch-feedback {
  transition: all 0.15s ease;
}

.touch-feedback:active {
  transform: scale(0.97);
  opacity: 0.8;
}

/* ====================================
   10. SPACING - Mobile Adjustments
   ==================================== */

@media (max-width: 640px) {
  .container {
    @apply px-4;
  }

  section {
    @apply py-6;
  }

  h1 {
    @apply text-2xl;
  }

  h2 {
    @apply text-xl;
  }

  h3 {
    @apply text-lg;
  }
}

/* ====================================
   11. SAFE AREAS - iOS Notch Support
   ==================================== */

@supports (padding: max(0px)) {
  .safe-area-top {
    padding-top: max(env(safe-area-inset-top), 0px);
  }

  .safe-area-bottom {
    padding-bottom: max(env(safe-area-inset-bottom), 0px);
  }

  .safe-area-left {
    padding-left: max(env(safe-area-inset-left), 0px);
  }

  .safe-area-right {
    padding-right: max(env(safe-area-inset-right), 0px);
  }
}

/* ====================================
   12. PERFORMANCE - Hardware Acceleration
   ==================================== */

.mobile-card,
.modal-content,
button,
.tab-link {
  will-change: transform;
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
}

/* ====================================
   13. MOBILE OPTIMIZATIONS - Custom
   ==================================== */

@media (max-width: 768px) {

  /* Tablas más compactas en mobile */
  table th,
  table td {
    padding: 0.5rem !important;
    font-size: 0.75rem;
    /* 12px */
  }

  /* Headers de tabla con fondo sólido */
  thead {
    background-color: #f3f4f6 !important;
  }

  /* Reducir altura de scroll en pantallas muy pequeñas */
  @media (max-height: 700px) {
    .overflow-y-auto {
      max-height: 300px !important;
    }
  }

  /* KPIs más compactos en mobile */
  .grid>div {
    min-height: unset;
  }

  /* Botones más pequeños pero manteniendo touch target */
  button:not(.tab-link) {
    padding: 8px 16px !important;
    font-size: 0.875rem;
  }

  /* Espaciado de secciones */
  section {
    padding-top: 1rem;
    padding-bottom: 1rem;
  }

  /* Prevenir overflow horizontal */
  body {
    overflow-x: hidden;
  }

  main {
    overflow-x: hidden;
  }
}

/* Optimizaciones para pantallas muy pequeñas */
@media (max-width: 375px) {

  /* Texto aún más pequeño en tablas */
  table {
    font-size: 0.625rem;
    /* 10px */
  }

  table th,
  table td {
    padding: 0.375rem !important;
  }

  /* KPIs ultra-compactos */
  .grid>div {
    padding: 0.375rem !important;
  }

  .grid>div h4 {
    font-size: 0.625rem !important;
  }

  .grid>div p {
    font-size: 0.75rem !important;
  }
}

/* ====================================
   14. ROLE BADGE MOBILE OVERRIDE
   ==================================== */

/* Force mobile styles for role badge with !important to override JS */
@media (max-width: 768px) {
  #roleBadge {
    padding-left: 0.5rem !important;
    /* 8px */
    padding-right: 0.5rem !important;
    /* 8px */
    padding-top: 0.125rem !important;
    /* 2px */
    padding-bottom: 0.125rem !important;
    /* 2px */
    letter-spacing: normal !important;
  }

  #roleBadgeIcon {
    display: none !important;
    margin-right: 0 !important;
  }

  #roleBadgeText {
    letter-spacing: normal !important;
  }
}